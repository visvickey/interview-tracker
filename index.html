<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; transition: background-color 0.3s; }
        input, select { font-size: 16px !important; } 
        .card { transition: transform 0.1s; }
        .card:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 p-4 pb-20 min-h-screen">

    <header class="mb-6 flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-bold">Interview Log</h1>
            <p class="text-[10px] font-bold opacity-50 uppercase tracking-widest">iPhone SE Optimized</p>
        </div>
        <button onclick="toggleTheme()" class="p-2 rounded-full bg-slate-200 dark:bg-slate-800 text-xl shadow-inner">
            <span id="themeIcon">ğŸŒ™</span>
        </button>
    </header>

    <section class="bg-white dark:bg-slate-800 p-5 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6">
        <div class="space-y-3">
            <input type="text" id="name" placeholder="Candidate Name" class="w-full p-3 bg-slate-100 dark:bg-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500">
            <input type="text" id="position" placeholder="Position (e.g. Sales Manager)" class="w-full p-3 bg-slate-100 dark:bg-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500">
            
            <div class="grid grid-cols-2 gap-2">
                <select id="type" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-xl appearance-none text-sm">
                    <option value="Personal">ğŸ“ Personal</option>
                    <option value="Telephonic">ğŸ“ Telephonic</option>
                    <option value="Virtual">ğŸ’» Virtual</option>
                </select>
                <input type="datetime-local" id="reminder" class="p-3 bg-slate-100 dark:bg-slate-700 rounded-xl text-sm">
            </div>

            <button onclick="addCandidate()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all">
                Schedule Interview
            </button>
        </div>
    </section>

    <div class="mb-4 relative">
        <input type="text" id="searchBar" oninput="render()" placeholder="Search names or positions..." 
               class="w-full p-3 pl-10 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-sm outline-none">
        <span class="absolute left-3 top-3.5 opacity-30">ğŸ”</span>
    </div>

    <div id="count" class="text-xs font-bold mb-4 opacity-60 uppercase ml-1">0 Entries</div>

    <div id="candidateList" class="space-y-3"></div>

    <script>
        let candidates = JSON.parse(localStorage.getItem('interviews')) || [];
        
        // --- Theme Logic ---
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            document.getElementById('themeIcon').innerText = 'â˜€ï¸';
        }

        function toggleTheme() {
            const html = document.documentElement;
            const icon = document.getElementById('themeIcon');
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                icon.innerText = 'ğŸŒ™';
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                icon.innerText = 'â˜€ï¸';
            }
        }

        // --- Core Logic ---
        function addCandidate() {
            const name = document.getElementById('name').value;
            const position = document.getElementById('position').value;
            const type = document.getElementById('type').value;
            const reminder = document.getElementById('reminder').value;

            if (!name || !position || !reminder) return alert("Please fill in all fields.");

            candidates.push({
                id: Date.now(),
                name,
                position,
                type,
                reminder,
                status: 'Pending'
            });

            saveAndRender();
            document.getElementById('name').value = '';
            document.getElementById('position').value = '';
        }

        function updateStatus(id, newStatus) {
            candidates = candidates.map(c => c.id === id ? {...c, status: newStatus} : c);
            saveAndRender();
        }

        function deleteCandidate(id) {
            if(confirm("Remove this candidate?")) {
                candidates = candidates.filter(c => c.id !== id);
                saveAndRender();
            }
        }

        function saveAndRender() {
            localStorage.setItem('interviews', JSON.stringify(candidates));
            render();
        }

        function render() {
            const list = document.getElementById('candidateList');
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            
            const filtered = candidates.filter(c => 
                c.name.toLowerCase().includes(searchTerm) || 
                c.position.toLowerCase().includes(searchTerm)
            );
            
            document.getElementById('count').innerText = `${filtered.length} Results`;
            list.innerHTML = '';
            
            if (filtered.length === 0) {
                list.innerHTML = `<div class="text-center py-10 opacity-40 font-medium">No records found</div>`;
                return;
            }

            filtered.sort((a, b) => new Date(a.reminder) - new Date(b.reminder)).forEach(c => {
                const date = new Date(c.reminder).toLocaleString([], { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                const typeIcon = c.type === 'Personal' ? 'ğŸ“' : c.type === 'Telephonic' ? 'ğŸ“' : 'ğŸ’»';
                
                const statusTheme = {
                    'Pending': 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400',
                    'Selected': 'bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400',
                    'Rejected': 'bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400 opacity-70'
                }[c.status];

                list.innerHTML += `
                    <div class="card bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700">
                        <div class="flex justify-between items-start mb-1">
                            <div>
                                <h3 class="font-bold text-lg leading-tight">${c.name}</h3>
                                <p class="text-indigo-600 dark:text-indigo-400 text-sm font-semibold">${c.position}</p>
                            </div>
                            <span class="text-[9px] px-2 py-1 rounded-md font-black uppercase ${statusTheme}">${c.status}</span>
                        </div>
                        <p class="text-xs opacity-60 mb-4">${typeIcon} ${c.type} â€¢ ${date}</p>
                        
                        <div class="flex items-center gap-2">
                            <select onchange="updateStatus(${c.id}, this.value)" class="flex-1 text-xs font-bold border-none bg-slate-100 dark:bg-slate-700 p-2 rounded-xl">
                                <option value="" disabled selected>Update Status</option>
                                <option value="Pending">Pending</option>
                                <option value="Selected">Selected</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                            <button onclick="deleteCandidate(${c.id})" class="p-2 opacity-30 hover:opacity-100 text-rose-500">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                `;
            });
        }

        // Check for reminders every minute
        setInterval(() => {
            const now = new Date().getTime();
            candidates.forEach(c => {
                const iTime = new Date(c.reminder).getTime();
                if (Math.abs(now - iTime) < 30000 && c.status === 'Pending') {
                    alert(`UPCOMING: ${c.name} for ${c.position}`);
                }
            });
        }, 60000);

        render();
    </script>
</body>
</html>
