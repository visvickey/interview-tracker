<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interview Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            background: #0f172a; /* Deep Navy */
            color: #f8fafc;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
        }
        .bento-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }
        .input-field {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #38bdf8;
            background: rgba(15, 23, 42, 0.9);
        }
        input, select { font-size: 16px !important; }
        .accent-gradient {
            background: linear-gradient(135deg, #38bdf8 0%, #818cf8 100%);
        }
    </style>
</head>
<body class="p-5 pb-24 min-h-screen">

    <header class="mb-8 flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-bold tracking-tight">Interview HQ</h1>
            <p class="text-slate-400 text-xs font-medium">Candidate Pipeline</p>
        </div>
        <div class="w-10 h-10 rounded-full accent-gradient flex items-center justify-center shadow-lg shadow-blue-500/20">
            <span class="text-xs font-bold">JD</span>
        </div>
    </header>

    <section class="bento-card p-6 mb-8 shadow-2xl">
        <div class="space-y-4">
            <input type="text" id="name" placeholder="Candidate Name" class="input-field w-full p-4 rounded-2xl outline-none">
            <input type="text" id="position" placeholder="Position" class="input-field w-full p-4 rounded-2xl outline-none">
            
            <div class="grid grid-cols-2 gap-3">
                <select id="type" class="input-field p-4 rounded-2xl outline-none appearance-none text-sm">
                    <option value="Personal">üìç Personal</option>
                    <option value="Telephonic">üìû Telephonic</option>
                    <option value="Virtual">üíª Virtual</option>
                </select>
                <div class="relative">
                    <input type="datetime-local" id="interviewTime" class="input-field w-full p-4 rounded-2xl outline-none text-sm">
                </div>
            </div>

            <div class="p-3 bg-slate-800/50 rounded-2xl border border-white/5 flex items-center justify-between">
                <span class="text-[10px] uppercase font-bold text-slate-400 ml-1">Alerts:</span>
                <div class="flex gap-4 mr-2">
                    <label class="text-[10px] flex items-center gap-1 font-bold"><input type="checkbox" id="remind60" checked class="accent-sky-400"> 1H</label>
                    <label class="text-[10px] flex items-center gap-1 font-bold"><input type="checkbox" id="remind30" checked class="accent-sky-400"> 30M</label>
                    <label class="text-[10px] flex items-center gap-1 font-bold"><input type="checkbox" id="remind15" checked class="accent-sky-400"> 15M</label>
                </div>
            </div>

            <button onclick="addCandidate()" class="accent-gradient w-full py-4 rounded-2xl font-bold text-white shadow-lg active:scale-95 transition-transform uppercase text-xs tracking-widest">
                Create Schedule
            </button>
        </div>
    </section>

    <div class="mb-6 relative">
        <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none opacity-40">üîç</div>
        <input type="text" id="searchBar" oninput="render()" placeholder="Find candidate..." 
               class="w-full p-4 pl-12 bg-slate-800/40 border border-white/5 rounded-2xl outline-none text-sm">
    </div>

    <div id="candidateList" class="space-y-4"></div>

    <script>
        let candidates = JSON.parse(localStorage.getItem('interviews_v4')) || [];

        function addCandidate() {
            const name = document.getElementById('name').value;
            const position = document.getElementById('position').value;
            const type = document.getElementById('type').value;
            const interviewTime = document.getElementById('interviewTime').value;

            if (!name || !position || !interviewTime) return alert("Please fill all details");

            candidates.push({
                id: Date.now(),
                name, position, type, interviewTime,
                status: 'Pending',
                alertsSent: []
            });

            saveAndRender();
            ['name', 'position', 'interviewTime'].forEach(id => document.getElementById(id).value = '');
        }

        function updateStatus(id, newStatus) {
            candidates = candidates.map(c => c.id === id ? {...c, status: newStatus} : c);
            saveAndRender();
        }

        function deleteCandidate(id) {
            if(confirm("Remove entry?")) {
                candidates = candidates.filter(c => c.id !== id);
                saveAndRender();
            }
        }

        function saveAndRender() {
            localStorage.setItem('interviews_v4', JSON.stringify(candidates));
            render();
        }

        function render() {
            const list = document.getElementById('candidateList');
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const filtered = candidates.filter(c => c.name.toLowerCase().includes(searchTerm) || c.position.toLowerCase().includes(searchTerm));
            
            list.innerHTML = '';
            
            filtered.sort((a, b) => new Date(a.interviewTime) - new Date(b.interviewTime)).forEach(c => {
                const dateObj = new Date(c.interviewTime);
                const timeStr = dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const dateStr = dateObj.toLocaleDateString([], { month: 'short', day: 'numeric' });
                
                const statusStyles = {
                    'Selected': 'bg-emerald-500/20 text-emerald-400',
                    'Rejected': 'bg-rose-500/20 text-rose-400',
                    'Pending': 'bg-sky-500/20 text-sky-400'
                }[c.status];

                list.innerHTML += `
                    <div class="bento-card p-5 border border-white/5">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-bold text-lg">${c.name}</h3>
                                <p class="text-xs text-slate-400 font-medium">${c.position}</p>
                            </div>
                            <span class="text-[10px] px-2 py-1 rounded-lg font-bold ${statusStyles}">${c.status}</span>
                        </div>

                        <div class="flex items-center gap-3 mb-5">
                            <div class="bg-white/5 px-3 py-2 rounded-xl text-center flex-1">
                                <p class="text-[9px] text-slate-500 uppercase font-black">Date</p>
                                <p class="text-xs font-bold">${dateStr}</p>
                            </div>
                            <div class="bg-white/5 px-3 py-2 rounded-xl text-center flex-1">
                                <p class="text-[9px] text-slate-500 uppercase font-black">Time</p>
                                <p class="text-xs font-bold text-sky-400">${timeStr}</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-2">
                            <select onchange="updateStatus(${c.id}, this.value)" class="flex-1 text-xs font-bold bg-slate-800 p-3 rounded-xl border-none outline-none">
                                <option value="" disabled selected>Update Status</option>
                                <option value="Pending">Pending</option>
                                <option value="Selected">Selected</option>
                                <option value="Rejected">Rejected</option>
                            </select>
                            <button onclick="deleteCandidate(${c.id})" class="p-3 bg-white/5 rounded-xl opacity-40 hover:opacity-100">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            });
        }

        // Reminder Engine
        function checkReminders() {
            const now = new Date().getTime();
            let updated = false;

            candidates.forEach(c => {
                if (c.status !== 'Pending') return;

                const eventTime = new Date(c.interviewTime).getTime();
                const diffMinutes = Math.floor((eventTime - now) / 60000);

                const triggers = [60, 30, 15, 0];
                triggers.forEach(t => {
                    const label = t === 0 ? "Now" : `${t}m`;
                    if (diffMinutes === t && !c.alertsSent.includes(label)) {
                        alert(`‚è∞ INTERVIEW ALERT: ${c.name} starts in ${label}!`);
                        c.alertsSent.push(label);
                        updated = true;
                    }
                });
            });

            if (updated) saveAndRender();
        }

        setInterval(checkReminders, 30000);
        render();
    </script>
</body>
</html>
