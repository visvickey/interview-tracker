<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interview Pro | Yellow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* High Contrast Yellow & Black Palette */
        :root {
            --brand-yellow: #FFDE00;
            --brand-black: #121212;
        }
        body { 
            background-color: var(--brand-yellow); 
            font-family: 'Inter', -apple-system, sans-serif;
            color: var(--brand-black);
        }
        input, select { 
            font-size: 16px !important; 
            background: #000 !important;
            color: #FFDE00 !important;
            border: 2px solid #000 !important;
        }
        input::placeholder { color: #FFDE00; opacity: 0.6; }
        .btn-black {
            background: #000;
            color: #FFDE00;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 900;
        }
        .card-black {
            background: #000;
            color: #FFDE00;
            border-radius: 24px;
        }
    </style>
</head>
<body class="p-4 pb-24 min-h-screen">

    <header class="mb-8 pt-4">
        <h1 class="text-4xl font-black italic uppercase leading-none italic">Interview<br>Manager</h1>
        <div class="h-1 w-20 bg-black mt-2"></div>
    </header>

    <section class="space-y-4 mb-10">
        <input type="text" id="name" placeholder="CANDIDATE NAME" class="w-full p-4 rounded-xl outline-none">
        <input type="text" id="position" placeholder="POSITION" class="w-full p-4 rounded-xl outline-none">
        
        <select id="type" class="w-full p-4 rounded-xl appearance-none">
            <option value="Personal">üìç PERSONAL</option>
            <option value="Telephonic">üìû TELEPHONIC</option>
            <option value="Virtual">üíª VIRTUAL</option>
        </select>

        <div class="bg-black text-[#FFDE00] p-4 rounded-2xl border-2 border-black">
            <label class="text-[10px] font-black uppercase mb-2 block tracking-widest">Schedule Interview Time</label>
            <input type="datetime-local" id="interviewTime" class="w-full p-2 mb-4 bg-transparent border-b border-yellow-400 !border-0 !border-b-2">
            
            <label class="text-[10px] font-black uppercase mb-2 block tracking-widest">Alert Settings</label>
            <div class="flex items-center gap-2">
                <input type="checkbox" id="remind60" checked class="w-5 h-5 accent-yellow-400"> <span class="text-xs mr-2">1H</span>
                <input type="checkbox" id="remind30" checked class="w-5 h-5 accent-yellow-400"> <span class="text-xs mr-2">30M</span>
                <input type="checkbox" id="remind15" checked class="w-5 h-5 accent-yellow-400"> <span class="text-xs">15M</span>
            </div>
        </div>

        <button onclick="addCandidate()" class="w-full btn-black py-5 rounded-2xl shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] active:shadow-none active:translate-x-1 active:translate-y-1 transition-all">
            ADD TO PIPELINE
        </button>
    </section>

    <div class="mb-6">
        <input type="text" id="searchBar" oninput="render()" placeholder="SEARCH..." 
               class="w-full p-3 bg-transparent border-2 border-black !text-black !bg-white/20 rounded-xl placeholder:text-black/50">
    </div>

    <div id="candidateList" class="space-y-6"></div>

    <script>
        let candidates = JSON.parse(localStorage.getItem('interviews_v3')) || [];

        function addCandidate() {
            const name = document.getElementById('name').value;
            const position = document.getElementById('position').value;
            const type = document.getElementById('type').value;
            const interviewTime = document.getElementById('interviewTime').value;

            if (!name || !position || !interviewTime) return alert("MISSING DATA");

            candidates.push({
                id: Date.now(),
                name, position, type, interviewTime,
                status: 'Pending',
                alertsSent: [] // Track which alerts (60, 30, 15) have been fired
            });

            saveAndRender();
            ['name', 'position', 'interviewTime'].forEach(id => document.getElementById(id).value = '');
        }

        function updateStatus(id, newStatus) {
            candidates = candidates.map(c => c.id === id ? {...c, status: newStatus} : c);
            saveAndRender();
        }

        function deleteCandidate(id) {
            if(confirm("DELETE?")) {
                candidates = candidates.filter(c => c.id !== id);
                saveAndRender();
            }
        }

        function saveAndRender() {
            localStorage.setItem('interviews_v3', JSON.stringify(candidates));
            render();
        }

        function render() {
            const list = document.getElementById('candidateList');
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const filtered = candidates.filter(c => c.name.toLowerCase().includes(searchTerm) || c.position.toLowerCase().includes(searchTerm));
            
            list.innerHTML = '';
            
            filtered.sort((a, b) => new Date(a.interviewTime) - new Date(b.interviewTime)).forEach(c => {
                const dateObj = new Date(c.interviewTime);
                const timeStr = dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });
                const dateStr = dateObj.toLocaleDateString([], { month: 'short', day: 'numeric' });
                
                const statusColor = c.status === 'Selected' ? 'bg-green-500 text-black' : c.status === 'Rejected' ? 'bg-red-600 text-white' : 'bg-yellow-400 text-black';

                list.innerHTML += `
                    <div class="card-black p-6 shadow-xl relative overflow-hidden border-t-8 border-yellow-400">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-black text-2xl uppercase italic leading-tight">${c.name}</h3>
                                <p class="text-yellow-400 font-bold text-xs tracking-widest">${c.position}</p>
                            </div>
                            <span class="text-[10px] px-2 py-1 font-black ${statusColor}">${c.status}</span>
                        </div>

                        <div class="grid grid-cols-2 gap-2 mb-6 text-center">
                            <div class="bg-white/10 p-2 rounded-lg">
                                <p class="text-[8px] opacity-50 uppercase">Date</p>
                                <p class="font-bold text-sm">${dateStr}</p>
                            </div>
                            <div class="bg-white/10 p-2 rounded-lg">
                                <p class="text-[8px] opacity-50 uppercase">Time</p>
                                <p class="font-bold text-sm text-yellow-400">${timeStr}</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-3">
                            <select onchange="updateStatus(${c.id}, this.value)" class="flex-1 text-[11px] font-black border-none !bg-yellow-400 !text-black p-3 rounded-lg outline-none">
                                <option value="" disabled selected>SET STATUS</option>
                                <option value="Pending">PENDING</option>
                                <option value="Selected">SELECTED</option>
                                <option value="Rejected">REJECTED</option>
                            </select>
                            <button onclick="deleteCandidate(${c.id})" class="text-xl">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            });
        }

        // Logic for 1h, 30m, and 15m Alerts
        function checkReminders() {
            const now = new Date().getTime();
            let updated = false;

            candidates.forEach(c => {
                if (c.status !== 'Pending') return;

                const eventTime = new Date(c.interviewTime).getTime();
                const diffMinutes = Math.floor((eventTime - now) / 60000);

                const alertCheck = (minutes, label) => {
                    if (diffMinutes === minutes && !c.alertsSent.includes(label)) {
                        alert(`‚ö†Ô∏è ALERT: ${c.name} for ${c.position} starts in ${label}!`);
                        c.alertsSent.push(label);
                        updated = true;
                    }
                };

                alertCheck(60, "1 Hour");
                alertCheck(30, "30 Minutes");
                alertCheck(15, "15 Minutes");
                alertCheck(0, "Now");
            });

            if (updated) saveAndRender();
        }

        setInterval(checkReminders, 30000); // Check every 30 seconds
        render();
    </script>
</body>
</html>
